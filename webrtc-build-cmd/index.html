<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>WebRTC 编译笔记 | rex_log | print &quot;hello world&quot;</title>

  
  <meta name="author" content="rex_lin">
  

  
  <meta name="description" content="iOS产生xcode项目1gn gen out/ios64 -args=&amp;quot;target_os=\&amp;quot;ios\&amp;quot; target_cpu=\&amp;quot;x64\&amp;quot; is_component_build=false proprietary_codecs=true ios_enable_code_signing=false&amp;quot; --ide=xcode
xcode项目文件位置 out/ios64/all.workspace ，项目包含多个TARGETS,其中AppRTCMobile是apprtc的ios版本
iOS真机调试必须ios_enable_code_signing=true，target_cpu=arm或target_cpu=arm64。如果存在多个签名要增加参数ios_code_signing_identity=[UUID]，具体这个UUID请 查看iOS本地签名uuid
iOS FAT库打包（57后面的版本才可用）1./tools-webrtc/ios/build_ios_libs.sh --extra-gn-args=&amp;apos;proprietary_codecs=true&amp;apos;
默认生成根目录下 out_ios_libs/WebRTC.framework 文件
windows产生vs2015编译配置12gn gen out/win_x64 -args=&amp;quot;target_cpu=\&amp;quot;x64\&amp;quot; proprietary_codecs=true use_openh264=true ffmpeg_branding=\&amp;quot;Chrome\&amp;quot;&amp;quot; --ide=vsgn gen out/win_x86 -args=&amp;quot;target_cpu=\&amp;quot;x86\&amp;quot; proprietary_codecs=true use_openh264=true ffmpeg_branding=\&amp;quot;Chrome\&amp;quot;&amp;quot; --ide=vs
vs项目文件位置 out/win_x64/all.sln
Android产生编译配置1gn gen out/android_arm -args=&amp;apos;target_os=&amp;quot;android&amp;quot; target_cpu=&amp;quot;arm&amp;quot; is_componnent_build=false proprietary_codecs=true use_openh264=true ffmpeg_branding=&amp;quot;Chrome&amp;quot;&amp;apos;">
  

  
  
  <meta name="keywords" content="WebRTC,Android,混合iOS,编译">
  

  <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">

  <meta property="og:title" content="WebRTC 编译笔记"/>

  <meta property="og:site_name" content="rex_log"/>

  
  <meta property="og:image" content="/blog/favicon.ico"/>
  

  <link href="/blog/favicon.ico" rel="icon">
  <link rel="alternate" href="/blog/atom.xml" title="rex_log" type="application/atom+xml">
  <link rel="stylesheet" href="/blog/css/style.css" media="screen" type="text/css">
</head>


<body>
<div class="blog">
  <div class="content">

    <header>
  <div class="site-branding">
    <h1 class="site-title">
      <a href="/blog/">rex_log</a>
    </h1>
    <p class="site-description">print &quot;hello world&quot;</p>
  </div>
  <nav class="site-navigation">
    <ul>
      
        <li><a href="/blog/404.html">404</a></li>
      
        <li><a href="/blog/">主页</a></li>
      
        <li><a href="/blog/about">关于</a></li>
      
        <li><a href="/blog/categories">分类</a></li>
      
        <li><a href="/blog/tags">标签</a></li>
      
        <li><a href="/blog/archives">归档</a></li>
      
        <li><a href="http://www.re2x.com/WebRTC-wiki">WebRTC-wiki</a></li>
      
    </ul>
  </nav>
</header>

    <main class="site-main posts-loop">
    <article>

  
    
    <h3 class="article-title"><span>WebRTC 编译笔记</span></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/blog/webrtc-build-cmd/" rel="bookmark">
        <time class="entry-date published" datetime="2017-03-02T01:52:01.000Z">
          2017-03-02
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <h1 id="iOS产生xcode项目"><a href="#iOS产生xcode项目" class="headerlink" title="iOS产生xcode项目"></a>iOS产生xcode项目</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gn gen out/ios64 -args=&quot;target_os=\&quot;ios\&quot; target_cpu=\&quot;x64\&quot; is_component_build=false proprietary_codecs=true ios_enable_code_signing=false&quot; --ide=xcode</div></pre></td></tr></table></figure>
<p>xcode项目文件位置 out/ios64/all.workspace ，项目包含多个TARGETS,其中AppRTCMobile是apprtc的ios版本</p>
<p><strong>iOS真机调试必须ios_enable_code_signing=true，target_cpu=arm或target_cpu=arm64。<br><br>如果存在多个签名要增加参数ios_code_signing_identity=[UUID]，具体这个UUID请 <a href="#查看iOS本地签名uuid">查看iOS本地签名uuid</a></strong></p>
<h1 id="iOS-FAT库打包（57后面的版本才可用）"><a href="#iOS-FAT库打包（57后面的版本才可用）" class="headerlink" title="iOS FAT库打包（57后面的版本才可用）"></a>iOS FAT库打包（57后面的版本才可用）</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">./tools-webrtc/ios/build_ios_libs.sh --extra-gn-args=&apos;proprietary_codecs=true&apos;</div></pre></td></tr></table></figure>
<p>默认生成根目录下 out_ios_libs/WebRTC.framework 文件</p>
<h1 id="windows产生vs2015编译配置"><a href="#windows产生vs2015编译配置" class="headerlink" title="windows产生vs2015编译配置"></a>windows产生vs2015编译配置</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">gn gen out/win_x64 -args=&quot;target_cpu=\&quot;x64\&quot; proprietary_codecs=true use_openh264=true ffmpeg_branding=\&quot;Chrome\&quot;&quot; --ide=vs</div><div class="line">gn gen out/win_x86 -args=&quot;target_cpu=\&quot;x86\&quot; proprietary_codecs=true use_openh264=true ffmpeg_branding=\&quot;Chrome\&quot;&quot; --ide=vs</div></pre></td></tr></table></figure>
<p>vs项目文件位置 out/win_x64/all.sln</p>
<h1 id="Android产生编译配置"><a href="#Android产生编译配置" class="headerlink" title="Android产生编译配置"></a>Android产生编译配置</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gn gen out/android_arm -args=&apos;target_os=&quot;android&quot; target_cpu=&quot;arm&quot; is_componnent_build=false proprietary_codecs=true use_openh264=true ffmpeg_branding=&quot;Chrome&quot;&apos;</div></pre></td></tr></table></figure>
<a id="more"></a>
<h1 id="Android-aar打包（57后面的版本才可用）"><a href="#Android-aar打包（57后面的版本才可用）" class="headerlink" title="Android aar打包（57后面的版本才可用）"></a>Android aar打包（57后面的版本才可用）</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">./tools-webrtc/android/build_aar.py --verbose --extra-gn-args=&apos;proprietary_codecs=true use_openh264=true ffmpeg_branding=&quot;Chrome&quot;&apos;</div></pre></td></tr></table></figure>
<p>默认生成根目录下 libwebrtc.aar 文件</p>
<h1 id="Android产生Android-Studio编译配置"><a href="#Android产生Android-Studio编译配置" class="headerlink" title="Android产生Android Studio编译配置"></a>Android产生Android Studio编译配置</h1><p><strong><code>2017-02-23</code> 更新</strong><br>最新的WebRTC项目已经支持生成AS项目，链接 <a href="https://groups.google.com/forum/#!topic/discuss-webrtc/b7yQjvPLHaM" target="_blank" rel="external">PSA: AppRTCMobile can now be developed in Android Studio</a>  ，具体做法如下：</p>
<p>执行如下命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">build/android/gradle/generate_gradle.py --output-directory $PWD/out/Debug --target &quot;//webrtc/examples:AppRTCMobile&quot; --use-gradle-process-resources</div></pre></td></tr></table></figure>
<p>生成的项目目录<code>out/Debug/gradle</code>，需要Android Studio 2.2及以上版本</p>
<p>具体编译方法查看 <a href="https://chromium.googlesource.com/chromium/src.git/+/master/docs/android_studio.md" target="_blank" rel="external">android_studio.md</a></p>
<p><strong>如下内容已被废弃↓</strong></p>
<hr>
<p>由于WebRTC本身没有可以产生AS项目的脚本，我们需要自己手动生成<br>1.先执行 <code>Android aar打包</code> 命令，产生 <code>libwebrtc.aar</code><br>2.新建一个 <code>Android Studio Project</code><br>3.在新建的 <code>Projec</code>  新建一个 <code>Module</code> ，选择 <code>Import .JAR/.AAR Package</code> ，选择 <code>步骤1</code> 生成的 <code>libwebrtc.aar</code> ，Subproject Name设为<code>libwebrtc</code><br>4.在 <code>app</code> Module的 <code>build.gradle</code> 的 <code>dependencies</code> 节点增加 <code>compile project(&quot;:libwebrtc&quot;)</code><br>5.把 <code>webrtc/examples/androidapp</code> 目录下的 <code>res</code> 、 <code>src</code> 文件夹及 <code>AndroidMainifest</code> 文件复制到 <code>app</code> Module，还有 <code>webrtc/examples/androidapp/third_party/autobanh/lib/autobanh.jar</code> 复制到 <code>app</code> Module的 <code>libs</code> 目录</p>
<hr>
<h1 id="编译"><a href="#编译" class="headerlink" title="编译"></a>编译</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ninja -C out/debug</div></pre></td></tr></table></figure>
<h1 id="查看编译配置参数"><a href="#查看编译配置参数" class="headerlink" title="查看编译配置参数"></a>查看编译配置参数</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gn args out/debug --list</div></pre></td></tr></table></figure>
<h1 id="查看可用的target"><a href="#查看可用的target" class="headerlink" title="查看可用的target"></a>查看可用的target</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gn ls out/debug</div></pre></td></tr></table></figure>
<h1 id="查看iOS本地签名uuid"><a href="#查看iOS本地签名uuid" class="headerlink" title="查看iOS本地签名uuid"></a>查看iOS本地签名uuid</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">xcrun security find-identity -v -p codesigning</div></pre></td></tr></table></figure>
<h1 id="查看iOS-app签名信息"><a href="#查看iOS-app签名信息" class="headerlink" title="查看iOS app签名信息"></a>查看iOS app签名信息</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">codesign -vv -d AppRTCMobile.app</div></pre></td></tr></table></figure>
<h1 id="查看iOS-app-provisoning信息"><a href="#查看iOS-app-provisoning信息" class="headerlink" title="查看iOS app provisoning信息"></a>查看iOS app provisoning信息</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mobileprovision-read -f AppRTCMobile.app/embedded.mobileprovision</div></pre></td></tr></table></figure>
<h1 id="获取特定版本"><a href="#获取特定版本" class="headerlink" title="获取特定版本"></a>获取特定版本</h1><ul>
<li>获取正式的版本：使用 <code>gclient sync</code> 下载完全部代码后，在代码目录下用 <code>git branch -a</code> 查看所有版本，并用<code>git checkout remotes/branch-heads/57</code> 获取57这个版本。</li>
<li>获取某次commit的版本：使用 <code>gclient sync -r src@037ee92455a6e7fc01efb4397a6cdcf8e49389b4</code> 获取037ee92455a6e7fc01efb4397a6cdcf8e49389b4这个commit id的版本。</li>
</ul>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><ul>
<li><a href="https://webrtc.org/native-code/development/" target="_blank" rel="external">WebRTC Development</a></li>
<li><a href="https://medium.com/@atsakiridis/building-a-fat-webrtc-framework-on-ios-8610fffb2224#.v7zqct8v9" target="_blank" rel="external">Building a Fat WebRTC framework on iOS</a></li>
<li><a href="https://chromium.googlesource.com/chromium/src/+/master/docs/windows_build_instructions.md" target="_blank" rel="external">Checking out and Building Chromium for Windows</a></li>
<li><a href="https://chromium.googlesource.com/chromium/src/+/master/DEPS#234" target="_blank" rel="external">查看chromium项目用的WebRTC版本</a></li>
</ul>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    
      

    <span class="post-categories">
      <i class="icon-categories"></i>
        <a href="/blog/categories/WebRTC/">WebRTC</a>
    </span>
    

    
    

    <span class="post-tags">
      <i class="icon-tags"></i>
        <a href="/blog/tags/WebRTC/">WebRTC</a><a href="/blog/tags/Android/">Android</a><a href="/blog/tags/混合iOS/">混合iOS</a><a href="/blog/tags/编译/">编译</a>
    </span>
    

    </div>

    
  </div>
</article>

  
	<section id="comments" class="comment">
	  <div id="disqus_thread">
	  <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
	  </div>
	</section>

	<script type="text/javascript">
	var disqus_shortname = 'null';
	(function(){
	  var dsq = document.createElement('script');
	  dsq.type = 'text/javascript';
	  dsq.async = true;
	  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
	  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	}());
	(function(){
	  var dsq = document.createElement('script');
	  dsq.type = 'text/javascript';
	  dsq.async = true;
	  dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
	  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	}());
	</script>





    </main>

    <footer class="site-footer">
  <p class="site-info">
    Proudly powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and
    Theme by <a href="https://github.com/CodeDaraW/Hacker" target="_blank">Hacker</a>
    </br>
    
    &copy; 2017 rex_lin
    
  </p>
</footer>
    
  </div>
</div>
</body>
</html>